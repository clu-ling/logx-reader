taxonomy: org/parsertongue/reader/grammars/logx/taxonomy.yml

vars:
  # NOTE: change pathPrefix for development
  # pathPrefix: "file:///Users/hahnpowell/repos/clu-ling/logx-reader/reader/grammars/logx"
  pathPrefix: "file:///Users/davidmedeiros/repos/clu-ling/logx/logx-reader/reader/grammars/logx"
  #pathPrefix: "org/parsertongue/grammars/logx"
  wh-words-en: "how|that|what|whatever|when|whenever|where|which|who|whoever|whom|whose|why"

rules:

  #- import: ${pathPrefix}/entities/avoid.yml

######################################
# Concepts
######################################

  - name: "org-ner"
    label: Organization
    priority: 2+
    example: "DoD"
    type: token
    pattern: |
      [entity="B-ORG"]
      # extant mentions should take priority
      [entity="I-ORG" & !mention=/./]* 

  - name: "loc-ner"
    label: Location
    type: token
    pattern: |
      [entity="B-LOC"]
      [entity="I-LOC"]*

  # https://en.wikipedia.org/wiki/Twenty-foot_equivalent_unit
  - name: "units"
    label: Unit
    type: token
    pattern: |
      [lemma=/^(?i)TEU/]

  - name: "quantity"
    label: Quantity
    type: token
    pattern: |
      [word=/^\d/] (?=@Unit)

  # FIXME: introduce a more principled way of identify cargo
  - name: "cargo"
    label: Cargo
    type: token
    pattern: |
      [word=/(?i)frozen/] [tag=/^N/]+
      |
      [tag=/^N/] cargo

  - name: "unknown-cargo"
    label: UnspecifiedCargo
    type: token
    pattern: |
      # "the cargo"
      (?<=[!tag=/^N/]) cargo

###############################
#
# time expressions
#
###############################
  - name: "month"
    label: Month
    type: token
    pattern: |
        January|February|March|April|May|June|July|August|September|October|November|December
 
  - name: "calendar-day"
    label: CalendarDay
    type: token
    pattern: |
        # August 12
        (?<=@Month) [word=/^\d{1,2}(rd|th)?$/]
        |
        [word=/^\d{1,2}(rd|th)?$/] (?=","? @Year)

  - name: "year"
    label: Year
    type: token
    pattern: |
        # in 2014
        (?<=[tag=IN]) [word=/^\d{4}$/]
        | 
        # "12 2020" or August 2020
        (?<=@Month|[word=/\d{1,2}(rd|th)?/] ","?) [word=/^\d{4}$/]

  - name: "date"
    label: Date
    type: token
    pattern: |
        # "August 2020" or "August 3 2020"
        @Month @Day? ","? @Year

  - name: "date-slashed"
    label: Date
    type: token
    pattern: |
      # 01/05/1986
      [word=/^([0-9]{1,2}\/[0-9]{1,2}\/([0-9][0-9]){1,2})/]
      |
      # 01/86
      [word=/^([0-9]{1,2}\/([0-9][0-9]){1,2})/]
    
  # - name: "concept"
  #   label: Concept
  #   type: token
  #   pattern: |
  #     [entity="B-Concept"]
  #     [entity="I-Concept"]*

  # # *ility
  # - name: "ility-concept"
  #   label: Concept
  #   type: token
  #   pattern: |
  #     [tag=/^(JJ|NN)/]* [lemma=/ility$/ & entity=O & !mention=/./]


  - import: ${pathPrefix}/entities/xp.yml