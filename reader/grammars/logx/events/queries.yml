# see https://gitlab.logx.cloud/team/bbn/logx-reader/-/issues/1
# - name: "basic-query"
#   label: Query
#   action: argsAsEntities
#   type: token
#   graph: "semantic-roles"
#   pattern: |
#     (?<trigger> [tag=/^W/]) []*? (?<topic> [tag=/^N/ & incoming=/^nsubj|A1/])

- name: "quanity-query-1"
  label: QuantityQuery
  example: "How many TEUs of DoD frozen meat is heading to Hamburg?"
  pattern: |
    trigger = [lemma=how] many|much
    unit:Unit? = <amod
    topic:Entity? = <amod nmod_of | (<<|>>)+ [incoming=nsubj]
    need:Entity? = (<<|>>)+ [incoming=dobj]
    predicate:Verb? = (<<|>>)+ [outgoing=nsubj]
    constraints:Constraint* = (<<|>>)+

- name: "when-query-1"
  label: WhenQuery
  example: "When will the freighter arrive in Hamburg?"
  pattern: |
    trigger = [lemma=when] | [lemma=what] [lemma=/time|day|hour|month/] | [lemma=how] [lemma=/often|frequently/]
    topic:Entity? = (<<|>>)+ [incoming=nsubj]
    need:Entity? = (<<|>>)+ [incoming=dobj]
    predicate:Verb? = (<<|>>)+ [outgoing=nsubj]
    constraints:Constraint* = (<<|>>)+

- name: "what-query-1"
  label: WhatQuery
  priority: 2+
  example: "Find ports near Hamburg with enough excess cargo capacity to handle shipments redirected from Hamburg."
  pattern: |
    trigger = [lemma=/^(find)$/]
    topic:Entity? = (<<|>>)+ [incoming=nsubj]
    need:Entity? = (<<|>>) [incoming=dobj] | (<<|>>)+ [incoming=dobj]
    #predicate:Verb? = (<<|>>)+ [outgoing=nsubj]
    constraints:Constraint* = (<<|>>)+
  
- name: "query"
  label: Query
  priority: 2+
  example: "When will the freighter arrive?"
  pattern: |
    trigger = [tag=/^W/ & !mention=Query]
    topic:Entity? = (<<|>>)+ [incoming=nsubj]
    need:Entity? = (<<|>>)+ [incoming=dobj]
    predicate:Verb? = (<<|>>)+ [outgoing=nsubj]
    constraints:Constraint* = (<<|>>)+

# - name: "quantity-query"
#   label: QuantityQuery
#   #type: token
#   example: "How many TEUs of DoD frozen meat is heading to Hamburg?"
#   graph: "semantic-roles"
#   pattern: |
#     trigger = [lemma=how] many
#     topic:Unit = <<* >>+ [tag=/^N/ & incoming="A1"]

# - name: "what-query"
#   label: Query
#   type: token
#   pattern: |
#     (?<trigger> [tag=/^W/ & !mention=Query]) @topic:Entity
